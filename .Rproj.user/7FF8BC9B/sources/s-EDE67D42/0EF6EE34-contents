---
title: "实习任务"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
## 任务1

由于对于金融和期货相关知识之前基本为零，在看了一些跨期套利的方法后，觉得趋势套利可能会比较适合较高频的数据。虽然期货价格这个时间序列很难用模型去拟合,在高频数据里也很难预测下一刻会涨会跌，但是在趋势套利里可以认为期货合约价格走势会具有类似“惯性”的类似性质，可以通过一些特征来判定此刻处于何种趋势中，如果处于价格上涨趋势时，就可以买入期货，当然套利时应该考虑两个不同期合约的差价，也可以认为他们具有该种“惯性”的性质。现在就是要考虑如何判断此刻是出于何种趋势中，并且要尽可能滤除随机波动的干扰。

现在可以考虑高低点的方式来确定趋势，如果一个时间点的差价比相邻左右两点差价要高，成为一阶高点，同理可以定义一阶低点。然后在所有一阶低点中可以选出二阶低点，在所有的一阶高点中可以选出二阶高点。

接下来定义一个基于高低点的交易策略,如果此刻的差价能够确定一个二阶低点，那就认为达到了一个极小值点，接下来是差价增大的趋势，就在此刻买入远期合约卖出近期合约。直到此刻后的下一个二阶高点出现，那么进行平仓，再进行新的套利活动。


```{python,eval=FALSE}
def f(X,t,T,w,l,S,R):
#X是历史价格差，t是此刻价格差，T代表套利收益，w是套利成功次数，l是套利失败的次数，S是状态
    M=[0,0]
    m=[0,0]
    if X[-1]> t and X[-1]>X[-2] and S!="high":   
#假设不在二阶高点时高点寻找下一个高点作为上涨趋势结束点      
        M.append(X[-1])
        if M[-2]>M[-1] and M[-2]>M[-3]:
            m=[0,0]
            S="high"
            T.append(t)           
            #记录交易点价差
            S=S+T[-1]-T[-2]
#记录总的盈利                       
        if T[-1]>T[-2]:
            w=w+1
        else:
            l=l+1
#记录套利成功和失败次数
    elif X[-1]<t and X[-1]<X[-2] and S != "low":
#假设不在二阶低点时高点寻找下一个低点作为上涨趋势结束点
        m.append(X[-1])
        if m[-2]<m[-1] and m[-2]<m[-3]:
            M=[0,0]
            S="low"
            T.append(t)
            S=S+T[-2]-T[-1]                       
            if T[-1]<T[-2]:
                w=w+1
            else:
                l=l+1            
    X.append(t)
    return

```
上面的函数只在感觉上觉得趋势是存在的，但是有时候受政策影响，或者说矿产其他因素影响，价差变化会超过趋势的顶点或者底点，所以应该设置一些止损点，认为在变化超过则止损点，预测的趋势被打破，平仓止损。

这种交易策略，重价不重市，没有考虑其他的一些交易参数，例如不同合约的流动性不同，有些合约要冒较大流动性风险。也没有考虑交易手续费，没有考虑交易数量。对于是否执行一次交易，我觉得或许可以设置一个加权的函数，对各部分因素进行综合考虑，到达阈值进行相应交易。

## 任务2

对于乌龙指的情况，可以在每次获取报价时进行一次判断，如果是一个非常不合理价差，那就进行套利，我觉得应该也要设置止损点，防止是因为其他现实因素影响造成的非“乌龙“情况。

## 学习和考试
学习内容:
熟悉交易所期货交易规则----www.shfe.com.cn
了解各品种交易参数,交割参数,shfe,dce,czce,cffe
了解欧式期权,美式期权,以及国内目前期权交易的类型
了解极速交易柜台(盛立,艾克朗克,易盛)
了解virtu,伊斯顿

考试题目:

1.期货的价格,保证金和杠杆之间的关系？请举例说明

期货交易时需缴纳一部分期货价格的保证金，因为交割实际完成前只需要保证金部分，所以可以用商品部分价格的钱完成期货交易。例如一桶石油100美元，保证金百分之15。所以可以用十五美元完成期货合约交易。

2.国内各大期货交易所的交易时间段是哪些时间段？开盘和收盘时间各是什么时间? 各时间段开盘和收盘有什么不同? 一个完整的交易日是指什么时间到什么时间?

国内期货交易时间为周一至周五早上9点到11点半，下午1点半到3点结束。早上10：15到10：30休盘15分钟，夜盘： 21点到日凌晨2:30分。各个期货交易所的休盘时间和夜盘时间稍有不同。
比如上海期货交易所的铜、铝、铅、锌、螺纹、热卷、 沥青期货，夜盘交易时间为21：00-1：00  ；黄金、白银期货为21：00-02：30 ；橡胶期货为21：00-23：00  ；
郑州商品交易所的棉花、白糖、菜粕、甲醇、PTA 期货，夜盘交易时间为21：00-23：30 。
大连商品交易所的棕榈油、焦炭、焦煤、铁矿石、豆粕、豆油、豆一、豆二期货，夜盘交易时间为21：00-23：30。
夜盘开始到当天收盘结束(前一天21:00到当日15:00)

3.上期所的撮合规则,集合竞价规则是什么?请举例说明

价格优先再时间优先，买价大于卖价。买家1报价3.5，买家2报价3.6，卖家1报价3.45，卖家2报价3.65，那么排序后完成卖家1和买家2的交易。因为剩下的不匹配，所以该笔交易成交价取买入卖出价均值。

4.上期所的交易指令有哪些? 这些指令代表什么意思？请举例说明
限价指令：达到某个价格完成交易
市价指令：已有利于交易完成的价格完成交易
取消指令：可以简单理解为撤单
FOK指令：指立即全部成交否则自动撤销;
FAK指令：立即成交剩余指令自动撤销


5.如果上期所早上9点开盘,请从计算机系统及网络系统的角度阐述,撮合机和报盘机如何保证在微秒或纳秒级别上保持时间的一致性?
将报盘，清算，行情主线分开
证卷网络平均流量小，但瞬间流量可能很大，使用低时延的交换机和更高带宽的线路可以改善延迟
利用GPS时钟源

6.什么是期货的升水和贴水?
在某一特定地点和特定时间内，某一特定商品的期货价格高于现货价格称为期货升水；期货价格低于现货价格称为期货贴水

7.什么是期权?
赋予持有人在某一特定日期或该日之前的任何时间以固定价格购进或售出一种资产的权利

8. 买方期权(又叫做看涨期权)与卖方期权(又叫做看跌期权)的区别是什么?
买方期权：指期权的购买者拥有在期权合约有效期内按执行价格买进一定数量标的物的权利
卖方期权：是期权交易的种类之一，在将来某一天或一定时期内，按规定的价格和数量，卖出某种有价证券的权利

8.请列举你知道的很简单,很明显的交易策略(比如新股打新策略)
基于移动平均线的策略
突破策略 
逆势策略

